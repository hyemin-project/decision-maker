{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d21a9130\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container sign-up-page\"\n};\nconst _hoisted_2 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_3 = {\n  class: \"col-12 col-md-6 col-lg-4\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-center mb-4\"\n}, \"Sign Up\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"mb-3\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\",\n  class: \"form-label\"\n}, \"Username\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"mb-3\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"email\",\n  class: \"form-label\"\n}, \"Email address\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"mb-3\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\",\n  class: \"form-label\"\n}, \"Password\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"mb-3\"\n};\nconst _hoisted_12 = {\n  ref: \"recaptcha\"\n};\nconst _hoisted_13 = {\n  class: \"d-grid\"\n};\nconst _hoisted_14 = [\"disabled\"];\nconst _hoisted_15 = {\n  key: 0,\n  class: \"text-danger mt-3\"\n};\nconst _hoisted_16 = {\n  class: \"mt-3 text-center\"\n};\nexport function render(_ctx, _cache) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => _ctx.signUp && _ctx.signUp(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control custom-input\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.username = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.username]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control custom-input\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.email = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.email]])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control custom-input\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.password = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.password]])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, null, 512 /* NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary btn-lg\",\n    disabled: _ctx.isLoading || !_ctx.isFormValid\n  }, _toDisplayString(_ctx.isLoading ? 'Signing Up...' : 'Sign Up'), 9 /* TEXT, PROPS */, _hoisted_14)])], 32 /* NEED_HYDRATION */), _ctx.error ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, _toDisplayString(_ctx.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"p\", _hoisted_16, [_createTextVNode(\" Already have an account? \"), _createVNode(_component_router_link, {\n    to: \"/login\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Login\")]),\n    _: 1 /* STABLE */\n  })])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","ref","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","_ctx","signUp","_hoisted_5","_hoisted_6","type","id","$event","username","required","_hoisted_7","_hoisted_8","email","_hoisted_9","_hoisted_10","password","_hoisted_11","_hoisted_12","_hoisted_13","disabled","isLoading","isFormValid","_hoisted_14","error","_hoisted_15","_toDisplayString","_createCommentVNode","_hoisted_16","_createTextVNode","_createVNode","_component_router_link","to","default","_withCtx","_"],"sources":["/Users/hyemin/Documents/Projects/decision-maker/client/src/components/SignUp.vue"],"sourcesContent":["<template>\n    <div class=\"container sign-up-page\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-md-6 col-lg-4\">\n          <h2 class=\"text-center mb-4\">Sign Up</h2>\n          <form @submit.prevent=\"signUp\">\n            <div class=\"mb-3\">\n              <label for=\"username\" class=\"form-label\">Username</label>\n              <input type=\"text\" class=\"form-control custom-input\" id=\"username\" v-model=\"username\" required>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"email\" class=\"form-label\">Email address</label>\n              <input type=\"email\" class=\"form-control custom-input\" id=\"email\" v-model=\"email\" required>\n            </div>\n            <div class=\"mb-3\">\n              <label for=\"password\" class=\"form-label\">Password</label>\n              <input type=\"password\" class=\"form-control custom-input\" id=\"password\" v-model=\"password\" required>\n            </div>\n            <div class=\"mb-3\">\n              <div ref=\"recaptcha\"></div>\n            </div>\n            <div class=\"d-grid\">\n              <button type=\"submit\" class=\"btn btn-primary btn-lg\" :disabled=\"isLoading || !isFormValid\">\n                {{ isLoading ? 'Signing Up...' : 'Sign Up' }}\n              </button>\n            </div>\n          </form>\n          <p v-if=\"error\" class=\"text-danger mt-3\">{{ error }}</p>\n          <p class=\"mt-3 text-center\">\n            Already have an account? <router-link to=\"/login\">Login</router-link>\n          </p>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { ref, onMounted, computed } from 'vue';\n  import { useRouter } from 'vue-router';\n  import { useStore } from 'vuex';\n  import api from '@/services/api';\n  \n  export default {\n    name: 'SignUpPage',\n    setup() {\n      const router = useRouter();\n      const store = useStore();\n      const username = ref('');\n      const email = ref('');\n      const password = ref('');\n      const error = ref('');\n      const isLoading = ref(false);\n      const recaptcha = ref(null);\n  \n      const isFormValid = computed(() => {\n        return username.value.length > 0 && \n               email.value.includes('@') && \n               password.value.length >= 8;\n      });\n  \n      const loadReCaptcha = () => {\n        const script = document.createElement('script');\n        script.src = 'https://www.google.com/recaptcha/api.js?render=explicit';\n        script.async = true;\n        script.defer = true;\n        document.head.appendChild(script);\n        script.onload = () => {\n          window.grecaptcha.ready(() => {\n            window.grecaptcha.render(recaptcha.value, {\n              sitekey: 'your-site-key'\n            });\n          });\n        };\n      };\n      const recaptcha = ref(null);\n\n    onMounted(() => {\n      grecaptcha.ready(() => {\n        grecaptcha.render(recaptcha.value, {\n          sitekey: 'your-actual-site-key-here'\n        });\n      });\n    });\n  \n      const signUp = async () => {\n        isLoading.value = true;\n        error.value = '';\n        try {\n          const token = grecaptcha.getResponse();\n          if (!token) {\n            throw new Error('Please complete the reCAPTCHA');\n          }\n          const response = await api.signup({\n            username: username.value,\n            email: email.value,\n            password: password.value,\n            token: token\n          });\n          console.log('SignUp successful:', response);\n          \n          await store.dispatch('setUser', response.user);\n          localStorage.setItem('token', response.token);\n          \n          router.push('/');\n        } catch (e) {\n          console.error('Sign up error:', e);\n          if (e.response?.status === 409) {\n            error.value = 'Email already in use. Please use a different email.';\n          } else if (e.message === 'Please complete the reCAPTCHA') {\n            error.value = e.message;\n          } else {\n            error.value = 'Sign up failed. Please try again.';\n          }\n        } finally {\n          isLoading.value = false;\n          grecaptcha.reset();\n        }\n      };\n  \n      return { \n        username, \n        email, \n        password, \n        error, \n        isLoading, \n        signUp, \n        recaptcha,\n        isFormValid \n      };\n    }\n  }\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  // ... (your existing styles)\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}