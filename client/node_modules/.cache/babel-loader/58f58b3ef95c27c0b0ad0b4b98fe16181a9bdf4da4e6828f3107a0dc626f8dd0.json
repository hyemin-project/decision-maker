{"ast":null,"code":"import { ref, computed, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  name: \"SpectrumStep\",\n  setup() {\n    const store = useStore();\n    const isSelecting = ref(false);\n    const pointerPosition = ref(0);\n    const choices = computed(() => store.state.choices);\n    const startSelection = () => {\n      if (isSelecting.value) return;\n      isSelecting.value = true;\n      let direction = 1;\n      let speed = 5;\n      let deceleration = 0.98;\n      let time = 0;\n      const animate = () => {\n        pointerPosition.value += direction * speed;\n        if (pointerPosition.value <= 0 || pointerPosition.value >= 100) {\n          direction *= -1;\n        }\n        speed *= deceleration;\n        time += 16;\n        if (speed > 0.1 && time < 5000) {\n          requestAnimationFrame(animate);\n        } else {\n          selectResult();\n        }\n      };\n      requestAnimationFrame(animate);\n    };\n    const selectResult = () => {\n      let accumulatedProbability = 0;\n      const result = choices.value.find(choice => {\n        accumulatedProbability += choice.probability;\n        return pointerPosition.value <= accumulatedProbability;\n      });\n      console.log(\"Selected result:\", result.text);\n      store.commit(\"setResult\", result.text);\n      store.commit(\"setCurrentStep\", 6);\n      isSelecting.value = false;\n    };\n    onMounted(() => {\n      // Initialize pointer at a random position\n      pointerPosition.value = Math.random() * 100;\n    });\n    return {\n      choices,\n      isSelecting,\n      pointerPosition,\n      startSelection\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","name","setup","store","isSelecting","pointerPosition","choices","state","startSelection","value","direction","speed","deceleration","time","animate","requestAnimationFrame","selectResult","accumulatedProbability","result","find","choice","probability","console","log","text","commit","Math","random"],"sources":["/Users/hyemin/Documents/Projects/decision-maker/client/src/components/SpinWheelStep.vue"],"sourcesContent":["<template>\n  <div class=\"spectrum-step\">\n    <h2>Choose from the Spectrum</h2>\n    <div class=\"spectrum-container\">\n      <div class=\"spectrum-bar\">\n        <div v-for=\"(choice, index) in choices\" :key=\"index\" \n             class=\"spectrum-section\"\n             :style=\"{ width: `${choice.probability}%`, backgroundColor: choice.color }\">\n          {{ choice.text }}\n        </div>\n      </div>\n      <div class=\"pointer\" :style=\"{ left: `${pointerPosition}%` }\"></div>\n    </div>\n    <button @click=\"startSelection\" :disabled=\"isSelecting\">\n      {{ isSelecting ? \"Selecting...\" : \"Start\" }}\n    </button>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default {\n  name: \"SpectrumStep\",\n  setup() {\n    const store = useStore();\n    const isSelecting = ref(false);\n    const pointerPosition = ref(0);\n    const choices = computed(() => store.state.choices);\n\n    const startSelection = () => {\n      if (isSelecting.value) return;\n\n      isSelecting.value = true;\n      let direction = 1;\n      let speed = 5;\n      let deceleration = 0.98;\n      let time = 0;\n\n      const animate = () => {\n        pointerPosition.value += direction * speed;\n        if (pointerPosition.value <= 0 || pointerPosition.value >= 100) {\n          direction *= -1;\n        }\n        speed *= deceleration;\n        time += 16;\n\n        if (speed > 0.1 && time < 5000) {\n          requestAnimationFrame(animate);\n        } else {\n          selectResult();\n        }\n      };\n\n      requestAnimationFrame(animate);\n    };\n\n    const selectResult = () => {\n      let accumulatedProbability = 0;\n      const result = choices.value.find(choice => {\n        accumulatedProbability += choice.probability;\n        return pointerPosition.value <= accumulatedProbability;\n      });\n\n      console.log(\"Selected result:\", result.text);\n      store.commit(\"setResult\", result.text);\n      store.commit(\"setCurrentStep\", 6);\n      isSelecting.value = false;\n    };\n\n    onMounted(() => {\n      // Initialize pointer at a random position\n      pointerPosition.value = Math.random() * 100;\n    });\n\n    return {\n      choices,\n      isSelecting,\n      pointerPosition,\n      startSelection,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.spectrum-container {\n  position: relative;\n  width: 100%;\n  height: 60px;\n  margin: 20px 0;\n}\n\n.spectrum-bar {\n  display: flex;\n  width: 100%;\n  height: 40px;\n}\n\n.spectrum-section {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-weight: bold;\n}\n\n.pointer {\n  position: absolute;\n  top: 0;\n  width: 4px;\n  height: 60px;\n  background-color: black;\n  transition: left 0.1s linear;\n}\n\nbutton {\n  margin-top: 20px;\n  padding: 10px 20px;\n  font-size: 18px;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n</style>"],"mappings":"AAoBA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAQ,QAAS,KAAK;AAC9C,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC,CAAC;IACxB,MAAMI,WAAU,GAAIP,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMQ,eAAc,GAAIR,GAAG,CAAC,CAAC,CAAC;IAC9B,MAAMS,OAAM,GAAIR,QAAQ,CAAC,MAAMK,KAAK,CAACI,KAAK,CAACD,OAAO,CAAC;IAEnD,MAAME,cAAa,GAAIA,CAAA,KAAM;MAC3B,IAAIJ,WAAW,CAACK,KAAK,EAAE;MAEvBL,WAAW,CAACK,KAAI,GAAI,IAAI;MACxB,IAAIC,SAAQ,GAAI,CAAC;MACjB,IAAIC,KAAI,GAAI,CAAC;MACb,IAAIC,YAAW,GAAI,IAAI;MACvB,IAAIC,IAAG,GAAI,CAAC;MAEZ,MAAMC,OAAM,GAAIA,CAAA,KAAM;QACpBT,eAAe,CAACI,KAAI,IAAKC,SAAQ,GAAIC,KAAK;QAC1C,IAAIN,eAAe,CAACI,KAAI,IAAK,KAAKJ,eAAe,CAACI,KAAI,IAAK,GAAG,EAAE;UAC9DC,SAAQ,IAAK,CAAC,CAAC;QACjB;QACAC,KAAI,IAAKC,YAAY;QACrBC,IAAG,IAAK,EAAE;QAEV,IAAIF,KAAI,GAAI,GAAE,IAAKE,IAAG,GAAI,IAAI,EAAE;UAC9BE,qBAAqB,CAACD,OAAO,CAAC;QAChC,OAAO;UACLE,YAAY,CAAC,CAAC;QAChB;MACF,CAAC;MAEDD,qBAAqB,CAACD,OAAO,CAAC;IAChC,CAAC;IAED,MAAME,YAAW,GAAIA,CAAA,KAAM;MACzB,IAAIC,sBAAqB,GAAI,CAAC;MAC9B,MAAMC,MAAK,GAAIZ,OAAO,CAACG,KAAK,CAACU,IAAI,CAACC,MAAK,IAAK;QAC1CH,sBAAqB,IAAKG,MAAM,CAACC,WAAW;QAC5C,OAAOhB,eAAe,CAACI,KAAI,IAAKQ,sBAAsB;MACxD,CAAC,CAAC;MAEFK,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEL,MAAM,CAACM,IAAI,CAAC;MAC5CrB,KAAK,CAACsB,MAAM,CAAC,WAAW,EAAEP,MAAM,CAACM,IAAI,CAAC;MACtCrB,KAAK,CAACsB,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC;MACjCrB,WAAW,CAACK,KAAI,GAAI,KAAK;IAC3B,CAAC;IAEDV,SAAS,CAAC,MAAM;MACd;MACAM,eAAe,CAACI,KAAI,GAAIiB,IAAI,CAACC,MAAM,CAAC,IAAI,GAAG;IAC7C,CAAC,CAAC;IAEF,OAAO;MACLrB,OAAO;MACPF,WAAW;MACXC,eAAe;MACfG;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}